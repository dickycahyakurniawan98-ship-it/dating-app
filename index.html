<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Chat Taiwan</title>
    <!-- Memuat Tailwind CSS untuk styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Memuat pustaka React dan ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Memuat Babel untuk mengolah JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            background-color: #e0f2fe; /* bg-sky-100 */
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const App = () => {
            // Tautan afiliasi yang akan dibuka
            const affiliateLink = 'https://www.profitableratecpm.com/ddk8vuvzg?key=54bc7b5978c7e78bd215d3af624ee8fb'; 
            
            // Daftar pesan otomatis dalam bahasa Taiwan yang menggoda untuk dating
            const autoMessages = [
                '嗨，你在找人聊天嗎？ (Hāi, nǐ zài zhǎo rén liáotiān ma?)',
                '很高興在這裡遇見你。 (Hěn gāoxìng zài zhèlǐ yùjiàn nǐ.)',
                '你的個人資料很有趣，想多聊聊嗎？ (Nǐ de gèrén zīliào hěn yǒuqù, xiǎng duō liáo liáo ma?)',
                '你看起來很可愛/帥氣，有空一起喝咖啡嗎？ (Nǐ kàn qǐlái hěn kě\'ài/shuàiqì, yǒu kòng yīqǐ hē kāfēi ma?)',
                '我們聊得這麼好，不如... (Wǒmen liáo dé zhème hǎo, bùrú...)',
                '有什麼新的想法嗎？ (Yǒu shéme xīn de xiǎngfǎ ma?)'
            ];

            // Daftar nama perempuan Taiwan
            const femaleNames = [
                'Mei', 'Wei', 'Lin', 'Chen', 'Li', 'Hui', 'Jia', 'Xiao', 'Yun', 'Ting'
            ];

            const [messages, setMessages] = useState([]);
            const [newMessage, setNewMessage] = useState('');
            // Mengubah nama pengguna menjadi "You"
            const [userName] = useState('You');
            const [autoSenderName] = useState(femaleNames[Math.floor(Math.random() * femaleNames.length)]);
            const messagesEndRef = useRef(null);

            // Simulasikan pesan awal dari pengirim otomatis
            useEffect(() => {
                const randomMessage = autoMessages[Math.floor(Math.random() * autoMessages.length)];
                setMessages([{
                    sender: 'auto',
                    text: randomMessage,
                    timestamp: Date.now(),
                }]);
            }, []);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            const handleSendMessage = (e) => {
                e.preventDefault();
                if (!newMessage.trim()) return;

                // Tambahkan pesan pengguna ke state lokal
                setMessages(prevMessages => [...prevMessages, {
                    sender: 'user',
                    text: newMessage,
                    timestamp: Date.now(),
                }]);

                setNewMessage('');
                
                // Buka tautan afiliasi
                window.open(affiliateLink, '_blank');
            };

            return (
                <div className="flex flex-col h-screen font-sans bg-sky-100 text-gray-800 antialiased">
                    <header className="p-4 bg-white shadow-md flex-shrink-0">
                        <div className="flex justify-between items-center max-w-2xl mx-auto">
                            <div className="flex items-center space-x-2">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6 text-gray-500" viewBox="0 0 20 20" fill="currentColor">
                                    <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414L6 10.586l3.707-3.707a1 1 0 011.414 1.414L7.414 12H14a1 1 0 110 2H7.414l3.293 3.293a1 1 0 01-1.414 1.414L4 12.414 3.293 11.707a1 1 0 010-1.414l7.293-7.293z" clipRule="evenodd" />
                                </svg>
                                <h1 className="text-xl font-bold text-gray-900">{autoSenderName}</h1>
                            </div>
                            <div className="flex space-x-2">
                                <a href={affiliateLink} target="_blank" rel="noopener noreferrer" className="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold text-sm rounded-full shadow-lg transition-colors duration-200">
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2h-15.62A2 2 0 0 1 2 19.92v-3a2 2 0 0 1 2-2h3"></path>
                                        <path d="M14 2h6v6"></path>
                                        <path d="M13.5 10.5L20 4"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </header>
                    <main className="flex-grow p-4 overflow-y-auto max-w-2xl mx-auto w-full">
                        <div className="flex flex-col space-y-4">
                            {messages.length === 0 ? (
                                <div className="flex items-center justify-center h-full text-center text-gray-500">
                                    <p>Belum ada pesan. Kirim yang pertama!</p>
                                </div>
                            ) : (
                                messages.map((msg, index) => {
                                    const isMyMessage = msg.sender === 'user';
                                    const senderName = isMyMessage ? userName : autoSenderName;
                                    return (
                                        <div key={index} className={`flex items-start ${isMyMessage ? 'justify-end' : 'justify-start'}`}>
                                            <div className={`max-w-xs md:max-w-md p-3 rounded-3xl shadow-md ${isMyMessage ? 'bg-lime-400 text-gray-900 rounded-br-none' : 'bg-white text-gray-900 rounded-bl-none'}`}>
                                                <div className="text-xs text-gray-500 font-semibold mb-1">{senderName}</div>
                                                <p className="text-sm break-words">{msg.text}</p>
                                                <div className={`flex text-xs mt-1 ${isMyMessage ? 'justify-end' : 'justify-start'} text-gray-600`}>
                                                    <span className="opacity-75">{new Date(msg.timestamp).toLocaleTimeString()}</span>
                                                    {isMyMessage && <span className="ml-2 opacity-75">Dibaca</span>}
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })
                            )}
                            <div ref={messagesEndRef} />
                        </div>
                    </main>
                    <footer className="p-2 bg-white shadow-lg flex-shrink-0">
                        <div className="flex space-x-2 items-center max-w-2xl mx-auto">
                            <button className="flex-shrink-0 text-gray-500 hover:text-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </button>
                            <input
                                type="text"
                                value={newMessage}
                                onChange={(e) => setNewMessage(e.target.value)}
                                placeholder="Enter a message..."
                                className="flex-grow p-3 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50"
                            />
                            <button className="flex-shrink-0 text-gray-500 hover:text-gray-700">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                    <path d="M12 21.5a9.5 9.5 0 1 0 0-19 9.5 9.5 0 0 0 0 19zM15 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
                                    <path d="M12 18.5v-3a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5v3"></path>
                                </svg>
                            </button>
                            <button
                                type="submit"
                                onClick={handleSendMessage}
                                className="flex-shrink-0 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-semibold rounded-full shadow-lg transition-colors duration-200"
                            >
                                Send
                            </button>
                        </div>
                    </footer>
                    <div id="messageBox" className="hidden fixed top-4 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-sm px-4 py-2 rounded-lg shadow-xl z-50 transition-opacity duration-300 opacity-0"></div>
                </div>
            );
        };
        
        // Render aplikasi React ke dalam div dengan id="root"
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);

    </script>
</body>
</html>
